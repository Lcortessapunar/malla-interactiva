<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Malla Curricular Interactiva</title>
  <style>
    :root{
      --aqua:#7fffd4;
      --aqua-dark:#009b77;
      --locked:#cccccc;
      --bg:#f7f9fb;
      --card:#ffffff;
      --accent:#333;
    }
    body{font-family:Inter, system-ui, Arial, sans-serif;background:var(--bg);margin:0;padding:28px;color:var(--accent);}
    h1{margin:0 0 18px;font-size:22px}
    .wrap{display:flex;flex-wrap:wrap;gap:12px}
    .semester{
      background:var(--card);
      border-radius:12px;
      padding:14px;
      width:260px;
      box-shadow:0 6px 18px rgba(0,0,0,0.06);
    }
    .semester h3{margin:0 0 10px;font-size:16px}
    .course{
      background:var(--aqua);
      border-radius:8px;
      padding:9px 10px;
      margin:8px 0;
      text-align:center;
      cursor:pointer;
      user-select:none;
      transition: transform .12s, box-shadow .12s, opacity .12s;
      font-size:14px;
    }
    .course:hover{transform:translateY(-3px);box-shadow:0 6px 12px rgba(0,0,0,0.06)}
    .course.approved{
      background:var(--aqua-dark);
      color:#fff;
      text-decoration:line-through;
      opacity:0.95;
    }
    .course.locked{
      background:var(--locked);
      color:#666;
      cursor:not-allowed;
      opacity:0.9;
      text-decoration:none;
      transform:none;
      box-shadow:none;
    }

    .controls{margin:18px 0 8px;display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    button{padding:8px 10px;border-radius:8px;border:0;cursor:pointer;background:#2b6cff;color:#fff}
    button.ghost{background:#efefef;color:#222}
    .legend{display:flex;gap:10px;align-items:center;font-size:13px;margin-top:8px}
    .legend span{display:inline-flex;align-items:center;gap:8px}
    .sw{width:14px;height:14px;border-radius:4px;display:inline-block}
    footer{margin-top:20px;font-size:13px;color:#555}
  </style>
</head>
<body>
  <h1>Malla Curricular Interactiva ‚Äî Modo Real</h1>

  <div class="controls">
    <button id="resetBtn" class="ghost">üîÅ Resetear Progreso</button>
    <button id="exportBtn">üì• Exportar Progreso (JSON)</button>
  </div>

  <div class="legend">
    <span><i class="sw" style="background:var(--aqua)"></i> No aprobado</span>
    <span><i class="sw" style="background:var(--aqua-dark)"></i> Aprobado</span>
    <span><i class="sw" style="background:var(--locked)"></i> Bloqueado</span>
  </div>

  <div id="malla" class="wrap" style="margin-top:16px"></div>

  <footer>
    Malla generada autom√°ticamente seg√∫n tu documento original.
  </footer>

  <script>
    const data = [
      {
        semestre: "1¬∞ A√±o - 1¬∞ Semestre",
        cursos: [
          { nombre: "Anatom√≠a & Morfolog√≠a", prereq: [] },
          { nombre: "Procesos Biol√≥gicos", prereq: [] },
          { nombre: "Bioestad√≠stica I", prereq: [] },
          { nombre: "Introducci√≥n a la Enfermer√≠a", prereq: [] },
          { nombre: "Ciencias Sociales de la Salud", prereq: [] },
          { nombre: "Ingl√©s I", prereq: [] }
        ]
      },

      {
        semestre: "1¬∞ A√±o - 2¬∞ Semestre",
        cursos: [
          { nombre: "Fisiolog√≠a", prereq: ["Anatom√≠a & Morfolog√≠a","Procesos Biol√≥gicos"] },
          { nombre: "Fundamentos de Enfermer√≠a", prereq: ["Introducci√≥n a la Enfermer√≠a"] },
          { nombre: "Seguridad Social & Sistemas de Salud", prereq: ["Ciencias Sociales de la Salud"] },
          { nombre: "Bioestad√≠stica II", prereq: ["Bioestad√≠stica I"] },
          { nombre: "M√≥dulo Integrador I", prereq: [] },
          { nombre: "Ingl√©s II", prereq: ["Ingl√©s I"] }
        ]
      },

      {
        semestre: "2¬∞ A√±o - 3¬∞ Semestre",
        cursos: [
          { nombre: "Cuidados de Enfermer√≠a en Salud Materno, Infantil & Adolescente", prereq: ["Fundamentos de Enfermer√≠a"] },
          { nombre: "Educaci√≥n para la Salud", prereq: ["Seguridad Social & Sistemas de Salud"] },
          { nombre: "Microbiolog√≠a & Parasitolog√≠a", prereq: ["Procesos Biol√≥gicos"] },
          { nombre: "Fisiopatolog√≠a General", prereq: ["Fisiolog√≠a"] },
          { nombre: "√âtica & Responsabilidad Social en Enfermer√≠a", prereq: [] },
          { nombre: "Epidemiolog√≠a", prereq: ["Seguridad Social & Sistemas de Salud","Bioestad√≠stica II"] },
          { nombre: "Ingl√©s III", prereq: ["Ingl√©s II"] }
        ]
      },

      {
        semestre: "2¬∞ A√±o - 4¬∞ Semestre",
        cursos: [
          {
            nombre: "Cuidados de Enfermer√≠a en Salud del Adulto & Persona Mayor",
            prereq: [
              "Cuidados de Enfermer√≠a en Salud Materno, Infantil & Adolescente",
              "Fisiopatolog√≠a General",
              "√âtica & Responsabilidad Social en Enfermer√≠a"
            ]
          },
          { nombre: "Enfermer√≠a & Autocuidado en Salud Mental", prereq: ["Educaci√≥n para la Salud"] },
          { nombre: "Bases Farmacol√≥gicas en Enfermer√≠a", prereq: ["Microbiolog√≠a & Parasitolog√≠a"] },
          { nombre: "M√≥dulo Integrador II", prereq: ["M√≥dulo Integrador I"] },
          { nombre: "Diagn√≥stico Participativo en Salud", prereq: ["Epidemiolog√≠a"] },
          { nombre: "Comunicaci√≥n Oral & Escrita", prereq: [] }
        ]
      },

      {
        semestre: "3¬∞ A√±o - 5¬∞ Semestre",
        cursos: [
          {
            nombre: "M√≥dulo Integrado de Enfermer√≠a en Salud del Adulto & Persona Mayor I",
            prereq: [
              "Cuidados de Enfermer√≠a en Salud del Adulto & Persona Mayor",
              "Bases Farmacol√≥gicas en Enfermer√≠a",
              "M√≥dulo Integrador II"
            ]
          },
          { nombre: "Enfermer√≠a en Salud Mental & Psiquiatr√≠a", prereq: ["Enfermer√≠a & Autocuidado en Salud Mental"] },
          { nombre: "Gesti√≥n en Enfermer√≠a I", prereq: ["Diagn√≥stico Participativo en Salud"] },
          { nombre: "Investigaci√≥n Cualitativa", prereq: ["Bioestad√≠stica II"] },
          { nombre: "Formaci√≥n General Electiva", prereq: [] }
        ]
      },

      {
        semestre: "3¬∞ A√±o - 6¬∞ Semestre",
        cursos: [
          { nombre: "M√≥dulo Integrado de Enfermer√≠a en Salud del Adulto & Persona Mayor II", prereq: ["M√≥dulo Integrado de Enfermer√≠a en Salud del Adulto & Persona Mayor I"] },
          { nombre: "M√≥dulo Integrado de Enfermer√≠a en Salud Familiar & Comunitaria I", prereq: ["M√≥dulo Integrado de Enfermer√≠a en Salud del Adulto & Persona Mayor I"] },
          { nombre: "Seguridad & Calidad de los Cuidados", prereq: ["M√≥dulo Integrado de Enfermer√≠a en Salud del Adulto & Persona Mayor I"] },
          { nombre: "Gesti√≥n en Enfermer√≠a II", prereq: ["Gesti√≥n en Enfermer√≠a I"] },
          { nombre: "Investigaci√≥n Cuantitativa", prereq: ["Investigaci√≥n Cualitativa"] }
        ]
      },

      {
        semestre: "4¬∞ A√±o - 7¬∞ Semestre",
        cursos: [
          { nombre: "M√≥dulo Integrado de Enfermer√≠a en Salud Materno, Infantil & Adolescente I", prereq: ["M√≥dulo Integrado de Enfermer√≠a en Salud del Adulto & Persona Mayor II"] },
          { nombre: "M√≥dulo Integrado de Enfermer√≠a en Salud Familiar & Comunitaria II", prereq: ["M√≥dulo Integrado de Enfermer√≠a en Salud Familiar & Comunitaria I"] },
          { nombre: "M√≥dulo Integrado de Enfermer√≠a en Urgencias, Emergencias & Desastres I", prereq: ["M√≥dulo Integrado de Enfermer√≠a en Salud del Adulto & Persona Mayor II"] },
          { nombre: "Seminario de Investigaci√≥n I", prereq: ["Investigaci√≥n Cuantitativa"] }
        ]
      },

      {
        semestre: "4¬∞ A√±o - 8¬∞ Semestre",
        cursos: [
          { nombre: "M√≥dulo Integrado de Enfermer√≠a en Salud Materno, Infantil & Adolescente II", prereq: ["M√≥dulo Integrado de Enfermer√≠a en Salud Materno, Infantil & Adolescente I"] },
          { nombre: "M√≥dulo Integrado de Enfermer√≠a en Urgencias, Emergencias & Desastres II", prereq: ["M√≥dulo Integrado de Enfermer√≠a en Urgencias, Emergencias & Desastres I"] },
          { nombre: "Seminario de Investigaci√≥n II", prereq: ["Seminario de Investigaci√≥n I"] },
          { nombre: "Antropolog√≠a Cristiana", prereq: [] }
        ]
      },

      {
        semestre: "5¬∞ A√±o - 9¬∞/10¬∞ Semestres",
        cursos: [
          { nombre: "Internado Rural Interdisciplinario", prereq: ["M√≥dulo Integrado de Enfermer√≠a en Salud Materno, Infantil & Adolescente I", "M√≥dulo Integrado de Enfermer√≠a en Urgencias, Emergencias & Desastres I", "Seminario de Investigaci√≥n I"] },
          { nombre: "Internado Profesional Nivel Primario Urbano", prereq: ["M√≥dulo Integrado de Enfermer√≠a en Salud Materno, Infantil & Adolescente I", "M√≥dulo Integrado de Enfermer√≠a en Urgencias, Emergencias & Desastres I", "Seminario de Investigaci√≥n I"] },
          { nombre: "Internado Profesional Nivel Secundario & Terciario de Atenci√≥n", prereq: ["M√≥dulo Integrado de Enfermer√≠a en Salud Materno, Infantil & Adolescente I", "M√≥dulo Integrado de Enfermer√≠a en Urgencias, Emergencias & Desastres I", "Seminario de Investigaci√≥n I"] },
          { nombre: "Profundizaci√≥n en Enfermer√≠a", prereq: ["M√≥dulo Integrado de Enfermer√≠a en Salud Materno, Infantil & Adolescente I", "M√≥dulo Integrado de Enfermer√≠a en Urgencias, Emergencias & Desastres I", "Seminario de Investigaci√≥n I"] }
        ]
      }
    ];

    const STORAGE_KEY = 'malla_aprobados_v1';
    let aprobados = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');

    function isUnlocked(course){
      if(!course.prereq || course.prereq.length===0) return true;
      return course.prereq.every(p => aprobados.includes(p));
    }

    function renderMalla(){
      const container = document.getElementById('malla');
      container.innerHTML = '';
      data.forEach(sem => {
        const box=document.createElement('div');
        box.className='semester';
        box.innerHTML=`<h3>${sem.semestre}</h3>`;
        sem.cursos.forEach(c=>{
          const el=document.createElement('div');
          el.className='course';
          el.textContent=c.nombre;

          if(aprobados.includes(c.nombre)){
            el.classList.add('approved');
          } else if(!isUnlocked(c)){
            el.classList.add('locked');
            el.title='Prerrequisitos: '+c.prereq.join(", ");
          }

          el.onclick=()=>{
            if(el.classList.contains('locked')) return;
            if(aprobados.includes(c.nombre)){
              aprobados = aprobados.filter(x=>x!==c.nombre);
            } else {
              aprobados.push(c.nombre);
            }
            localStorage.setItem(STORAGE_KEY, JSON.stringify(aprobados));
            renderMalla();
          };

          box.appendChild(el);
        });
        container.appendChild(box);
      });
    }

    document.getElementById('resetBtn').onclick=()=>{
      if(confirm("¬øResetear progreso?")){
        aprobados=[];
        localStorage.setItem(STORAGE_KEY, JSON.stringify(aprobados));
        renderMalla();
      }
    };

    document.getElementById('exportBtn').onclick=()=>{
      const blob=new Blob([JSON.stringify(aprobados,null,2)],{type:"application/json"});
      const url=URL.createObjectURL(blob);
      const a=document.createElement('a');
      a.href=url;a.download='progreso_malla.json';
      a.click();
      URL.revokeObjectURL(url);
    };

    renderMalla();
  </script>
</body>
</html>
